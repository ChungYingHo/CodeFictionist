"use strict";(self.webpackChunkcode_fictionist=self.webpackChunkcode_fictionist||[]).push([[1658],{90655:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tech_articles/language/SQL/basic-sql-02","title":"SQL - \u57fa\u790e\u8a9e\u6cd5-2","description":"JOIN","source":"@site/docs/tech_articles/03-language/04-SQL/02-basic-sql-02.mdx","sourceDirName":"tech_articles/03-language/04-SQL","slug":"/tech_articles/language/SQL/basic-sql-02","permalink":"/docs/tech_articles/language/SQL/basic-sql-02","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"sql","permalink":"/docs/tags/sql"}],"version":"current","sidebarPosition":2,"frontMatter":{"title":"SQL - \u57fa\u790e\u8a9e\u6cd5-2","tags":["sql"]},"sidebar":"programSidebar","previous":{"title":"SQL - \u57fa\u790e\u8a9e\u6cd5-1","permalink":"/docs/tech_articles/language/SQL/basic-sql"},"next":{"title":"Data - \u8cc7\u6599\u5eab\u6b63\u898f\u5316","permalink":"/docs/tech_articles/language/SQL/normalization"}}');var r=s(74848),d=s(28453);const l={title:"SQL - \u57fa\u790e\u8a9e\u6cd5-2",tags:["sql"]},c=void 0,a={},o=[{value:"JOIN",id:"join",level:2},{value:"INNER JOIN",id:"inner-join",level:3},{value:"LEFT JOIN \u548c RIGHT JOIN",id:"left-join-\u548c-right-join",level:3},{value:"SELF JOIN",id:"self-join",level:3},{value:"\u7d9c\u5408\u7df4\u7fd2",id:"\u7d9c\u5408\u7df4\u7fd2",level:3},{value:"SQL Transaction (\u4ea4\u6613)",id:"sql-transaction-\u4ea4\u6613",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function t(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",...(0,d.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"join",children:"JOIN"}),"\n",(0,r.jsxs)(e.p,{children:["\u5df2\u77e5\u5728 orders \u8cc7\u6599\u8868\u88e1\u8a18\u9304\u4e86\u6bcf\u500b\u98f2\u6599\u54c1\u9805\u7684\u8ca9\u8ce3\u60c5\u6cc1\uff0c\u4f46\u9019\u500b\u8cc7\u6599\u8868\u4e2d\u53ea\u8a18\u9304\u4e86\u98f2\u6599\u7684 drinks_id\uff0c\u4e26\u6c92\u6709\u98f2\u6599\u7684\u8a73\u7d30\u540d\u7a31\uff0c\u8a73\u7d30\u540d\u7a31\u662f\u8a18\u9304\u5728 drinks \u8cc7\u6599\u8868\u88e1\u9762\uff0c\u6240\u4ee5\u6703\u9700\u8981\u7528 ",(0,r.jsx)(e.code,{children:"JOIN"})," \u4f86\u5e6b\u5fd9\u5169\u500b\u8cc7\u6599\u8868\u505a\u9023\u7d50\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"inner-join",children:"INNER JOIN"}),"\n",(0,r.jsx)(e.p,{children:"\u67e5\u5c0b\u5169\u908a\u8cc7\u6599\u8868\u90fd\u6709\u7684\u8cc7\u6599\uff0c\u6bd4\u65b9\u8aaa\uff0c\u73fe\u5728\u8981\u628a orders \u7684 drinks_id \u5c0d\u56de drinks \u7684 id \u4f86\u627e\u51fa\u98f2\u6599\u540d\u7a31\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"SELECT orders.`drinks_id`, orders.`amounts`, drinks.`name`\nFROM drinks\nJOIN orders\nON drinks.`id` = orders.`drinks_id`;\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"JOIN"})," \u7684\u91cd\u9ede\u5728\u65bc\uff1a"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"SELECT"}),"\uff0c\u53cd\u6b63\u67e5\u8a62\u4e00\u5b9a\u8981\u6709 ",(0,r.jsx)(e.code,{children:"SELECT"}),"\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"FROM"})," \u662f\u539f\u672c\u7684\u8cc7\u6599\u8868\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"JOIN"})," \u662f\u8981\u52a0\u5165\u67e5\u8a62\u7684\u8cc7\u6599\u8868\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ON"})," \u5247\u662f\u53c3\u8003\u9ede\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"left-join-\u548c-right-join",children:"LEFT JOIN \u548c RIGHT JOIN"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"INNER JOIN"})," \u53ea\u5217\u51fa\u4e86\u5169\u908a\u8cc7\u6599\u76f8\u7b26\u7684\u90e8\u5206\uff0c\u4f46\u5982\u679c\u4eca\u5929\u60f3\u628a\u53c3\u8003\u9ede\u5c0d\u61c9\u4e0d\u5230\u7684\u8cc7\u6599\u4e5f\u4e00\u4f75\u5448\u73fe\u5462\uff1f\u6bd4\u65b9\u8aaa\u9084\u662f\u60f3\u5217\u51fa\u6240\u6709\u98f2\u6599\u540d\u7a31\u600e\u9ebc\u8fa6\uff0c\u90a3\u5c31\u662f\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"LEFT JOIN"})," \u548c ",(0,r.jsx)(e.code,{children:"RIGHT JOIN"}),"\u3002"]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"LEFT"})," \u6307\u7684\u662f ",(0,r.jsx)(e.code,{children:"FROM"})," \u5f8c\u9762\u7684\u8cc7\u6599\u8868\uff0c",(0,r.jsx)(e.code,{children:"RIGHT"})," \u6307\u7684\u662f ",(0,r.jsx)(e.code,{children:"JOIN"})," \u5f8c\u9762\u7684\u8cc7\u6599\u8868"]})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- LEFT JOIN\nSELECT orders.`drinks_id`, orders.`amounts`, drinks.`name`\nFROM drinks\nLEFT JOIN orders\nON drinks.`id` = orders.`drinks_id`;\n\n-- RIGHT JOIN\nSELECT orders.`drinks_id`, orders.`amounts`, drinks.`name`\nFROM orders\nRIGHT JOIN drinks\nON drinks.`id` = orders.`drinks_id`;\n"})}),"\n",(0,r.jsx)(e.h3,{id:"self-join",children:"SELF JOIN"}),"\n",(0,r.jsx)(e.p,{children:"\u901a\u5e38\u7528\u5728\u540c\u4e00\u5f35\u8cc7\u6599\u8868\u505a\u6bd4\u8f03\u7684\u72c0\u6cc1\u3002\u6bd4\u65b9\u8aaa\uff0c\u5728 drinks \u4e2d\u627e\u6bd4\u51b0\u5496\u5561\u4fbf\u5b9c\u7684\u98f2\u6599\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"SELECT d1.`name`, d2.`name` AS `cheaper_name`, d2.price\nFROM drinks AS d1\nJOIN drinks AS d2\nON d1.price > d2.price\nWHERE d1.`name` = '\u51b0\u5496\u5561';\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u7d9c\u5408\u7df4\u7fd2",children:"\u7d9c\u5408\u7df4\u7fd2"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u54ea\u9805\u98f2\u6599\u92b7\u552e\u91cf\u6700\u9ad8\uff1f"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"SELECT drinks.`name`, SUM(orders.`amounts`) AS `total`\nFROM drinks\nJOIN orders\nON drinks.`id` = orders.`drinks_id`\nGROUP BY orders.`drinks_id`\nORDER BY `total` DESC\nLIMIT 1;\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:"\u8ab0\u662f\u8cfc\u8cb7\u984d\u6700\u9ad8\u7684\u9867\u5ba2\uff1f"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"SELECT customers.`name`, SUM(orders.`amounts` * drinks.`price`) AS `revenue`\nFROM orders\nJOIN customers\nON customers.`id` = orders.`customers_id` \nJOIN drinks\nON drinks.`id` = orders.`drinks_id`\nGROUP BY customers.`id`\nORDER BY `revenue` DESC\nLIMIT 1;\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"sql-transaction-\u4ea4\u6613",children:"SQL Transaction (\u4ea4\u6613)"}),"\n",(0,r.jsx)(e.p,{children:"SQL \u4f5c\u70ba\u64cd\u7e31\u8cc7\u6599\u7684\u8a9e\u8a00\uff0c\u6709\u6642\u96e3\u514d\u6703\u9047\u5230\u8907\u6578\u8cc7\u6599\u64cd\u7e31\u5fc5\u9808\u5168\u90e8\u57f7\u884c\u5b8c\u6210\uff0c\u5426\u5247\u4e7e\u8106\u4e0d\u8981\u57f7\u884c\u7684\u6642\u5019\uff0c\u6bd4\u5982\u8aaa\uff1a\u8f49\u5e33\u6642 A\u3001B \u5e33\u6236\u7684\u8cc7\u6599\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u82e5\u662f\u4eca\u5929 A \u8f49\u4e86\u9322\u7d66 B\uff0c\u90a3\u4ed6\u5011\u7684\u5e33\u6236\u91d1\u984d\u8cc7\u6599\u52e2\u5fc5\u5f97\u66f4\u65b0\u3002\u4f46\u7576 A \u66f4\u65b0\u5b8c\u5f8c\uff0c\u7a0b\u5f0f\u7a81\u7136\u5d29\u6f70\u4e86\uff0cB \u6c92\u66f4\u65b0\u5230\u5e33\u6236\u8cc7\u6599\uff0c\u9019\u6a23\u7b97\u6709\u5165\u5e33\u9084\u662f\u6c92\u5165\u5e33\uff1f\u6240\u4ee5\u6703\u9700\u8981\u4ea4\u6613\u4f86\u5e6b\u52a9\u7ba1\u7406\u9700\u8981\u5168\u90e8\u57f7\u884c\u5b8c\u7562\u7684\u6b65\u9a5f\u4f86\u907f\u514d\u9019\u7a2e\u60c5\u5f62\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4ea4\u6613\u7684\u57fa\u672c\u539f\u5247\u5c31\u662f\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["SQL \u6307\u4ee4\u57f7\u884c\u7686\u6b63\u78ba\uff0c\u5247\u57f7\u884c ",(0,r.jsx)(e.code,{children:"COMMIT"})," \u5b8c\u6210\u7570\u52d5\uff0c\u76f8\u95dc\u8cc7\u6599\u8868\u66f4\u52d5\u3002"]}),"\n",(0,r.jsx)(e.li,{children:"SQL \u6307\u4ee4\u57f7\u884c\u51fa\u4efb\u4f55\u4e00\u500b\u932f\uff0c\u5247\u57f7\u884c 'ROLLBACK` \u53d6\u6d88\u7570\u52d5\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",metastring:"title='\u8f49\u5e33\u7bc4\u4f8b'",children:"BEGIN TRANSACTION;\n\nUPDATE Accounts\nSET Balance = Balance - 100\nWHERE AccountID = 1;\n\nUPDATE Accounts\nSET Balance = Balance + 100\nWHERE AccountID = 2;\n\n-- \u63d0\u4ea4\u4e8b\u52d9\nCOMMIT;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://oldmo860617.medium.com/database-transaction-acid-156a3b75845e",children:"Database Transaction & ACID"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(t,{...n})}):t(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>l,x:()=>c});var i=s(96540);const r={},d=i.createContext(r);function l(n){const e=i.useContext(d);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),i.createElement(d.Provider,{value:e},n.children)}}}]);