"use strict";(self.webpackChunkcode_fictionist=self.webpackChunkcode_fictionist||[]).push([[7641],{71097:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>a});var o=l(85893),t=l(11151);const s={title:"vue3-openlayers \u5165\u9580\u7bc7",tags:["vue3","nuxt3","openlayers"]},r=void 0,i={id:"dev-note/\u7d9c\u5408\u7b46\u8a18/vue3-ol",title:"vue3-openlayers \u5165\u9580\u7bc7",description:"\u5b89\u88dd vue3-openlayers",source:"@site/docs/dev-note/02-\u7d9c\u5408\u7b46\u8a18/04-vue3-ol.mdx",sourceDirName:"dev-note/02-\u7d9c\u5408\u7b46\u8a18",slug:"/dev-note/\u7d9c\u5408\u7b46\u8a18/vue3-ol",permalink:"/docs/dev-note/\u7d9c\u5408\u7b46\u8a18/vue3-ol",draft:!1,unlisted:!1,tags:[{inline:!0,label:"vue3",permalink:"/docs/tags/vue-3"},{inline:!0,label:"nuxt3",permalink:"/docs/tags/nuxt-3"},{inline:!0,label:"openlayers",permalink:"/docs/tags/openlayers"}],version:"current",sidebarPosition:4,frontMatter:{title:"vue3-openlayers \u5165\u9580\u7bc7",tags:["vue3","nuxt3","openlayers"]},sidebar:"programSidebar",previous:{title:"\u95dc\u9589\u700f\u89bd\u5668\u6642\u89f8\u767c\u8b66\u544a",permalink:"/docs/dev-note/\u7d9c\u5408\u7b46\u8a18/browser-unload"},next:{title:"PWA \u57fa\u672c\u6982\u5ff5",permalink:"/docs/dev-note/PWA/basic-pwa"}},c={},a=[{value:"\u5b89\u88dd vue3-openlayers",id:"\u5b89\u88dd-vue3-openlayers",level:2},{value:"\u8a2d\u5b9a plugin \u6a94\u6848",id:"\u8a2d\u5b9a-plugin-\u6a94\u6848",level:2},{value:"\u5370\u51fa\u7b2c\u4e00\u5f35\u4e16\u754c\u5730\u5716",id:"\u5370\u51fa\u7b2c\u4e00\u5f35\u4e16\u754c\u5730\u5716",level:2},{value:"\u89e3\u6790 <code>&lt;script setup&gt;</code> \u5167\u5bb9",id:"\u89e3\u6790-script-setup-\u5167\u5bb9",level:3},{value:"\u89e3\u6790 <code>&lt;template&gt;</code>",id:"\u89e3\u6790-template",level:3}];function p(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h2,{id:"\u5b89\u88dd-vue3-openlayers",children:["\u5b89\u88dd ",(0,o.jsx)(n.a,{href:"https://vue3openlayers.netlify.app/",children:"vue3-openlayers"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-powershell",children:"# \u200binstall the peerDependencies\nnpm install ol ol-ext ol-contextmenu\n# \u200binstall this library\nnpm install vue3-openlayers\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8a2d\u5b9a-plugin-\u6a94\u6848",children:"\u8a2d\u5b9a plugin \u6a94\u6848"}),"\n",(0,o.jsxs)(n.p,{children:["\u5728 vue3-openlayers \u7684\u5b98\u7db2\u53ea\u6709\u4f7f\u7528 Vue3 \u7684\u8a2d\u5b9a\u6559\u5b78\uff0c\u7528 Nuxt \u505a\u8a2d\u5b9a\u7684\u6211\u9084\u662f\u5728 Stack Overflow \u4e0a\u770b\u7684\u3002(\u8a73\u7d30\u770b",(0,o.jsx)(n.a,{href:"https://stackoverflow.com/questions/70189545/how-to-add-vue3-openlayers-plugin-to-nuxt",children:"\u9019\u4e00\u7bc7"}),")"]}),"\n",(0,o.jsxs)(n.p,{children:["\u5728 Nuxt \u4e2d\u8981\u4f7f\u7528 ol \u8981\u5148\u8a2d\u5b9a\u63d2\u4ef6\uff0c\u4e5f\u5c31\u662f ",(0,o.jsx)(n.strong,{children:"plugin"})," \u6a94\u6848\u3002\u7136\u5f8c\u56e0\u70ba vue3-ol \u9700\u8981\u4f9d\u8cf4 window\uff0c\u6240\u4ee5\u6211\u5011\u5fc5\u9808\u8981\u628a\u63d2\u4ef6\u5957\u5230\u5ba2\u6236\u7aef\uff0c\u56e0\u6b64\u6a94\u540d\u8981\u4f7f\u7528 ",(0,o.jsx)(n.strong,{children:".client.js"}),"\u3002",(0,o.jsx)(n.br,{}),"\n","\u56e0\u6b64\u5148\u5728\u6839\u76ee\u9304\u4e0b\u5efa\u7acb\u4e00\u500b ",(0,o.jsx)(n.strong,{children:"plugins"})," \u8cc7\u6599\u593e\uff0c\u7136\u5f8c\u5728\u88e1\u9762\u5efa\u7acb\u4e00\u500b ",(0,o.jsx)(n.strong,{children:"vue3-ol.client.js"})," \u8a2d\u5b9a\u6a94\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { defineNuxtPlugin } from '#app'\nimport OpenLayers from 'vue3-openlayers'\n\nexport default defineNuxtPlugin(nuxtApp => {\n  nuxtApp.vueApp.use(OpenLayers)\n})\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5370\u51fa\u7b2c\u4e00\u5f35\u4e16\u754c\u5730\u5716",children:"\u5370\u51fa\u7b2c\u4e00\u5f35\u4e16\u754c\u5730\u5716"}),"\n",(0,o.jsxs)(n.p,{children:["\u5728\u6839\u76ee\u9304\u4e0b\u5efa\u7acb\u4e00\u500b components \u8cc7\u6599\u593e\uff0c\u4e26\u5efa\u7acb\u4e00\u500b ",(0,o.jsx)(n.strong,{children:"MyMap.vue"})," \u7d44\u4ef6\uff0c\u9019\u88e1\u6211\u5011\u7528\u5b98\u7db2\u7684\u7bc4\u4f8b code\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<script setup>\nimport { ref } from \'vue\'\nconst center = ref([40, 40])\nconst projection = ref(\'EPSG:4326\')\nconst zoom = ref(8)\nconst rotation = ref(0)\n<\/script>\n\n<template>\n    <ol-map\n        style="height: 400px"\n    >\n        <ol-view\n            ref="view"\n            :center="center"\n            :rotation="rotation"\n            :zoom="zoom"\n            :projection="projection"\n        />\n\n        <ol-tile-layer>\n            <ol-source-osm />\n        </ol-tile-layer>\n    </ol-map>\n</template>\n\n<style scoped>\n@import \'vue3-openlayers/dist/vue3-openlayers.css\';\n</style>\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"\u89e3\u6790-script-setup-\u5167\u5bb9",children:["\u89e3\u6790 ",(0,o.jsx)(n.code,{children:"<script setup>"})," \u5167\u5bb9"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"center\uff1a\u9019\u4ee3\u8868\u7684\u5730\u5716\u8d77\u59cb\u4e2d\u5fc3\u9ede\u5ea7\u6a19\uff0c\u6539\u6539\u770b\uff0c\u6eff\u597d\u73a9\u7684\uff0c\u53f0\u7063\u5927\u6982\u662f\u5728 [841, 24] \u7684\u5730\u65b9\u3002"}),"\n",(0,o.jsx)(n.li,{children:"projection\uff1a\u8868\u793a\u5730\u5716\u6295\u5f71\u65b9\u5f0f\uff0c\u9810\u8a2d\u7684 EPSG:4326 \u662f\u4e00\u7a2e\u7d93\u7def\u5ea6\u5ea7\u6a19\u7cfb\u7d71\u3002"}),"\n",(0,o.jsx)(n.li,{children:"zoom\uff1a\u5730\u5716\u7684\u7e2e\u653e\u7d1a\u5225\uff0c\u6578\u5b57\u8d8a\u5c0f\u53ef\u4ee5\u770b\u5230\u7bc4\u570d\u8d8a\u5ee3\u7684\u5730\u5716\u3002"}),"\n",(0,o.jsx)(n.li,{children:"rotation\uff1a\u5730\u5716\u65cb\u8f49\u89d2\u5ea6\u3002"}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"\u89e3\u6790-template",children:["\u89e3\u6790 ",(0,o.jsx)(n.code,{children:"<template>"})]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<ol-map>"}),"\uff1a\u9019\u662f ol \u63d0\u4f9b\u7684\u5730\u5716\u5bb9\u5668\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u5716\u756b\u7684\u756b\u6846\uff0c\u5728\u9019\u88e1\u7d66\u5b83\u8a2d\u5b9a\u4e86\u9ad8\u5ea6\u70ba 400px\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<ol-view>"}),"\uff1a\u5982\u679c\u8aaa ",(0,o.jsx)(n.code,{children:"<ol-map>"})," \u662f\u756b\u6846\uff0c",(0,o.jsx)(n.code,{children:"<ol-view>"})," \u5c31\u662f\u756b\u5e03\u7684\u90e8\u5206\u3002\u4ed6\u6c7a\u5b9a\u4e86\u9019\u5f35\u5730\u5716\u7684\u7e2e\u653e\u3001\u4e2d\u5fc3\u3001\u65cb\u8f49\u7b49\u914d\u7f6e\uff0c\u524d\u9762\u5728 ",(0,o.jsx)(n.code,{children:"<script setup>"})," \u4e2d\u4f5c\u7684\u8a2d\u5b9a\u5c31\u662f\u7d66\u5b83\u7528\u7684\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<ol-tile-layer>"}),"\u3001",(0,o.jsx)(n.code,{children:"<ol-source-osm>"}),"\uff1a\u73fe\u5728\u60f3\u50cf\uff0c\u9019\u662f\u4e00\u5e45\u62fc\u8cbc\u756b\uff0c\u7d66\u4e86\u756b\u6846\u548c\u756b\u5e03\uff0c\u90a3\u63a5\u4e0b\u4f86\u5c31\u662f\u8981\u628a\u4e00\u584a\u584a\u756b\u7247\u7d66\u8cbc\u4e0a\u756b\u5e03\uff0c\u9019\u500b\u756b\u7247\u5c31\u662f ",(0,o.jsx)(n.code,{children:"<ol-tile-layer>"}),"\u3002\u800c ",(0,o.jsx)(n.code,{children:"<ol-source-osm>"})," \u5c31\u662f\u756b\u7247\u4e0a\u7684\u8272\u5f69\uff0c\u4e5f\u5c31\u662f\u8cc7\u6599\u4f86\u6e90\u3002 osm \u8868\u793a\u8cc7\u6599\u4f86\u81ea OpenStreetMap\u3002"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},11151:(e,n,l)=>{l.d(n,{Z:()=>i,a:()=>r});var o=l(67294);const t={},s=o.createContext(t);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);