"use strict";(self.webpackChunkcode_fictionist=self.webpackChunkcode_fictionist||[]).push([[7836],{88306:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});var t=s(85893),r=s(11151);const c={title:"py4e - Access Web Data",tags:["python"]},l=void 0,i={id:"language/Python/coursera-m3",title:"py4e - Access Web Data",description:"Regular Expressions",source:"@site/docs/language/Python/03-coursera-m3.mdx",sourceDirName:"language/Python",slug:"/language/Python/coursera-m3",permalink:"/docs/language/Python/coursera-m3",draft:!1,unlisted:!1,tags:[{label:"python",permalink:"/docs/tags/python"}],version:"current",sidebarPosition:3,frontMatter:{title:"py4e - Access Web Data",tags:["python"]},sidebar:"programSidebar",previous:{title:"py4e - Data Structure",permalink:"/docs/language/Python/coursera-m2"},next:{title:"py4e - Using Databases",permalink:"/docs/language/Python/coursera-m4"}},d={},o=[{value:"Regular Expressions",id:"regular-expressions",level:2},{value:"Sockets",id:"sockets",level:2},{value:"Unicode",id:"unicode",level:2},{value:"ASCII",id:"ascii",level:3},{value:"Unicode",id:"unicode-1",level:3},{value:"Urllib + BeautifulSoup",id:"urllib--beautifulsoup",level:2},{value:"XML",id:"xml",level:2},{value:"JSON",id:"json",level:2},{value:"\u8ab2\u7a0b\u7e3d\u7d50",id:"\u8ab2\u7a0b\u7e3d\u7d50",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"regular-expressions",children:"Regular Expressions"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"re.search"}),"\uff1a\u8fd4\u56de\u7b2c\u4e00\u500b\u627e\u5230\u7684\u9805\u76ee\u3002\u76f8\u7576\u65bc ",(0,t.jsx)(n.code,{children:"re.find"}),"\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"re.finadall"}),"\uff1a\u641c\u7d22\u6240\u6709\u5339\u914d\u7684\u9805\u76ee\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import re\nfh = open('regex_sum_1927563.txt')\ncontent = fh.read()\nregFh = re.findall('[0-9]+', content)\nnums = 0\nfor i in regFh:\n    nums += int(i)\nprint(nums)\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"RegEx"}),(0,t.jsx)(n.th,{children:"\u89e3\u91cb"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"a"})}),(0,t.jsx)(n.td,{children:'\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7684 "a"\u3002'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"^a"})}),(0,t.jsx)(n.td,{children:'\u5339\u914d\u4ee5 "a" \u958b\u982d\u9805\u76ee\u3002'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"b$"})}),(0,t.jsx)(n.td,{children:'\u5339\u914d\u4ee5\u5b57\u6bcd "b" \u7d50\u5c3e\u7684\u5b57\u4e32\u3002'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"."})}),(0,t.jsxs)(n.td,{children:['\u5339\u914d\u4efb\u4f55\u55ae\u500b\u5b57\u7b26\uff0c\u5982\u5b57\u4e32 "abc" \u53ef\u4ee5\u7528 ',(0,t.jsx)(n.code,{children:"a.c"})," \u5339\u914d\u6574\u500b\u5b57\u4e32\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"+"})}),(0,t.jsxs)(n.td,{children:["\u8868\u793a\u524d\u9762\u7684\u898f\u5247\u53ef\u4ee5\u91cd\u8907\u4e00\u6b21\u6216\u591a\u6b21\uff0c\u5982 ",(0,t.jsx)(n.code,{children:"a+"}),' \u5c07\u5339\u914d "a"\u3001"aa"\u3001"aaa" \u7b49\u3002']})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"+?"})}),(0,t.jsxs)(n.td,{children:["\u975e\u8caa\u5a6a\u5339\u914d\uff0c\u6703\u5c07\u5339\u914d\u7684\u5b57\u7b26\u9650\u5236\u5728\u6700\u5c0f\u53ef\u80fd\u7684\u7bc4\u570d\uff0c\u5982 ",(0,t.jsx)(n.code,{children:"a+?"}),' \u5339\u914d "aaa" \u6703\u53ea\u8fd4\u56de "a"\u3002']})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"*"})}),(0,t.jsxs)(n.td,{children:["\u8868\u793a\u524d\u9762\u7684\u898f\u5247\u53ef\u4ee5\u91cd\u8907 ",(0,t.jsx)(n.code,{children:"0"})," \u6b21\u6216\u591a\u6b21\uff0c\u7528\u6cd5\u8ddf ",(0,t.jsx)(n.code,{children:"+"})," \u76f8\u540c\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"*?"})}),(0,t.jsx)(n.td,{children:"\u975e\u8caa\u5a6a\u5339\u914d\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"\\s"})}),(0,t.jsxs)(n.td,{children:["\u5339\u914d\u7a7a\u767d\u5b57\u4e32\uff0c\u5982 ",(0,t.jsx)(n.code,{children:"^\\s+"})," \u53ef\u4ee5\u5339\u914d\u4ee5\u7a7a\u767d\u958b\u982d\u7684\u5b57\u4e32\u3002"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"\\S"})}),(0,t.jsx)(n.td,{children:"\u5339\u914d\u975e\u7a7a\u767d\u5b57\u4e32\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[abc]"})}),(0,t.jsx)(n.td,{children:"\u5339\u914d\u7fa4\u7d44\u5167\u4efb\u4e00\u5b57\u7b26\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"[^abc]"})}),(0,t.jsx)(n.td,{children:"\u5339\u914d\u7fa4\u7d44\u4ee5\u5916\u7684\u5b57\u7b26\u3002"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"()"})}),(0,t.jsxs)(n.td,{children:["\u5206\u7d44\uff0c\u5982 ",(0,t.jsx)(n.code,{children:"(abc)+"}),' \u5c07\u5339\u914d\u9023\u7e8c\u51fa\u73fe\u7684 "abcabc"\u3002']})]})]})]})}),"\n",(0,t.jsx)(n.h2,{id:"sockets",children:"Sockets"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import socket\n# \u5275\u5efa socket\nmysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n# \u9023\u7d50\u4f3a\u670d\u5668\u8207\u7aef\u53e3\nmysock.connect(('data.pr4e.org', 80))\ncmd = 'GET http://data.pr4e.org/intro-short.txt HTTP/1.0\\r\\n\\r\\n'.encode()\nmysock.send(cmd)\n\nwhile True:\n    # \u6bcf\u6b21\u63a5\u6536\u6700\u591a 512 \u500b\u5b57\u7bc0\u7684\u6578\u64da\n    data = mysock.recv(512)\n    if len(data) < 1:\n        break\n    print(data.decode(),end='')\n\nmysock.close()\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4e0b\u5716\u70ba ",(0,t.jsx)(n.code,{children:"Python for everybody"})," \u8ab2\u7a0b\u5f71\u7247\u622a\u5716\uff0c\u7528\u7e6a\u5716\u7684\u65b9\u5f0f\u65b9\u5e38\u5feb\u901f\u7406\u89e3 socket \u548c\u4e0a\u8ff0\u7a0b\u5f0f\u78bc\u5728\u7db2\u8def\u6e9d\u901a\u4e2d\u626e\u6f14\u7684\u89d2\u8272\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(23426).Z+"",width:"1600",height:"808"})}),"\n",(0,t.jsx)(n.h2,{id:"unicode",children:"Unicode"}),"\n",(0,t.jsx)(n.h3,{id:"ascii",children:"ASCII"}),"\n",(0,t.jsx)(n.p,{children:"\u65e9\u671f\u5e38\u7528\u7684\u5b57\u7b26\u7de8\u78bc\u65b9\u5f0f\uff0c\u4ee5 128 \u500b\u6578\u5b57\u806f\u7e6b\u4e86 26 \u500b\u5927\u5beb\u5b57\u6bcd\u300126 \u500b\u5c0f\u5beb\u5b57\u6bcd\u300110 \u500b\u6578\u5b57\u3001\u6a19\u9ede\u7b26\u865f\u3001\u63a7\u5236\u5b57\u7b26\u7b49\u3002\u6bcf\u500b\u5b57\u7b26\u90fd\u6709\u4e00\u500b\u552f\u4e00\u7684 7 \u4f4d\u4e8c\u9032\u5236\u7de8\u78bc\uff0c\u9019\u6a23\u7684\u8a2d\u8a08\u4f7f\u5f97 ASCII \u5b57\u7b26\u53ef\u4ee5\u76f4\u63a5\u6620\u5c04\u5230\u4e00\u500b\u5b57\u7bc0\uff08byte\uff0c8 \u4f4d\uff09\u7684\u4e8c\u9032\u5236\u6578\u64da\u4e2d\u3002"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(89587).Z+"",width:"1124",height:"488"})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["\u9019\u4e5f\u8aaa\u660e\u4e86\u70ba\u4ec0\u9ebc ",(0,t.jsx)(n.code,{children:"print('H' < 'h')"})," \u6703\u5f97\u5230 ",(0,t.jsx)(n.code,{children:"True"}),"\uff0c\u56e0\u70ba\u4ee3\u8868 h \u7684\u6578\u5b57\u662f 104\uff0c\u5927\u65bc H \u7684 72\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"print(ord('H'))\n# 72\n"})})]}),"\n",(0,t.jsx)(n.h3,{id:"unicode-1",children:"Unicode"}),"\n",(0,t.jsxs)(n.p,{children:["\u89e3\u6c7a ASCII \u7121\u6cd5\u5132\u5b58\u5176\u4ed6\u8a9e\u7cfb\u5b57\u7b26\u7684\u554f\u984c\u3002",(0,t.jsx)(n.code,{children:"UTF-8"})," \u662f\u73fe\u5728\u5e38\u7528\u7684\u7de8\u78bc\u65b9\u5f0f\u3002",(0,t.jsx)(n.br,{}),"\n","\u4e0b\u5716\u89e3\u91cb\u4e86\u70ba\u4f55\u4e0a\u8ff0\u7a0b\u5f0f\u78bc\u9700\u8981\u9032\u884c ",(0,t.jsx)(n.code,{children:"encode"})," \u548c ",(0,t.jsx)(n.code,{children:"decode"}),"\u3002"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(41734).Z+"",width:"1600",height:"396"})}),"\n",(0,t.jsx)(n.h2,{id:"urllib--beautifulsoup",children:"Urllib + BeautifulSoup"}),"\n",(0,t.jsxs)(n.p,{children:["Urllib \u662f Python \u7684\u4e00\u500b\u6a19\u6e96\u5eab\uff0c\u5c08\u9580\u7528\u4f86\u722c\u53d6\u7db2\u9801\u8cc7\u6e90\u3002",(0,t.jsx)(n.br,{}),"\n","BeautifulSoup \u5247\u662f Python \u7528\u4f86\u89e3\u6790\u7372\u5f97\u7684 HTML \u6216 XML \u8cc7\u6599\u7684 library\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"title='\u5148\u5b89\u88dd BeautifulSoup'",children:"pip install beautifulsoup4\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:'from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport ssl\n\n# Ignore SSL certificate errors\nctx = ssl.create_default_context()\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nurl = "http://py4e-data.dr-chuck.net/comments_42.html"\nhtml = urlopen(url, context=ctx).read()\nsoup = BeautifulSoup(html, "html.parser")\n\ntags = soup(\'span\')\ntotal = 0\nfor tag in tags:\n    try:\n        num = int(tag.contents[0])\n        total += num\n    except:\n        continue\nprint(total)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"xml",children:"XML"}),"\n",(0,t.jsxs)(n.p,{children:["\u65e9\u671f\u6cdb\u7528\u7684\u8de8\u5e73\u53f0\u9593\u7684\u4ea4\u63db\u6578\u64da\u683c\u5f0f\uff0c\u9577\u5f97\u8ddf HTML \u5f88\u50cf\uff0c\u73fe\u5728\u4f9d\u820a\u6709\u90e8\u5206\u5e73\u53f0\u6216\u4f3a\u670d\u5668\u6cbf\u7528 XML \u505a\u8cc7\u6599\u50b3\u8f38\u3002",(0,t.jsx)(n.br,{}),"\n","\u5728 Python \u4e2d\u53ef\u4ee5\u5229\u7528 ",(0,t.jsx)(n.a,{href:"https://docs.python.org/3/library/xml.etree.elementtree.html",children:(0,t.jsx)(n.code,{children:"xml.etree.ElementTree"})})," \u4f86\u628a XML \u89e3\u6790\u6210 element tree (\u5c31\u50cf HTML \u53ef\u4ee5\u89e3\u6790\u6210 DOM tree) \u4f86\u65b9\u4fbf\u505a\u8cc7\u6599\u7684\u89e3\u6790\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import urllib.request, urllib.parse, urllib.error\nimport ssl\nimport xml.etree.ElementTree as ET\n\nctx = ssl.create_default_context()\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nurl = 'http://py4e-data.dr-chuck.net/comments_1927567.xml'\ndata = urllib.request.urlopen(url, context=ctx).read()\n\ntree = ET.fromstring(data)\ncounts = tree.findall('.//count')\ntotal = 0\nfor count in counts:\n    total += int(count.text)\nprint(total)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"json",children:"JSON"}),"\n",(0,t.jsxs)(n.p,{children:["\u73fe\u5728\u8f03\u6cdb\u7528\u7684\u8de8\u5e73\u53f0\u8cc7\u6599\u4ea4\u63db\u683c\u5f0f\uff0c\u56e0\u70ba\u6bd4 XML \u66f4\u52a0\u8f15\u91cf\u8207\u4fbf\u65bc\u89e3\u6790\uff0c\u6240\u4ee5\u4f7f\u7528\u7387\u8d85\u8d8a XML\u3002",(0,t.jsx)(n.br,{}),"\n","\u5728 Python \u4e2d\u53ef\u4ee5\u900f\u904e ",(0,t.jsx)(n.code,{children:"json"})," \u5957\u4ef6\u4f86\u89e3\u6790 JSON\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-py",children:"import urllib.request, urllib.parse, urllib.error\nimport ssl\nimport json\n\nctx = ssl.create_default_context()\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nurl = 'http://py4e-data.dr-chuck.net/comments_1927568.json'\ndata = urllib.request.urlopen(url, context=ctx).read()\ninfo = json.loads(data)\n\ntotal = 0\nfor item in info['comments']:\n    total += item['count']\nprint(total)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u8ab2\u7a0b\u7e3d\u7d50",children:"\u8ab2\u7a0b\u7e3d\u7d50"}),"\n",(0,t.jsx)(n.p,{children:"\u7db2\u8def\u9593\u7684\u6e9d\u901a\uff0c\u7d9c\u5408\u4ee5\u4e0a\u5f9e socket \u5230 JSON\uff0c\u5927\u81f4\u53ef\u4ee5\u628a\u6d41\u7a0b\u6b78\u7d0d\u5982\u4e0b\uff1a"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u8cc7\u6599\u8981\u9001\u51fa\u53bb\u6642\u9084\u662f XML \u6216 JSON\uff0c\u5148\u8f49\u70ba Unicode\uff0c\u518d encode \u6210 bytes\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u900f\u904e socket \u5c07\u8acb\u6c42\u6216\u8cc7\u6599\u9001\u51fa\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u63a5\u6536\u65b9\u6536\u5230\u5f8c\uff0c\u5c07 bytes \u7d66\u89e3\u78bc\u6210 Unicode\uff0c\u5728\u89e3\u6790\u6210 XML \u6216 JSON\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["\u6216\u8a31\u6703\u6709\u7591\u554f\u70ba\u4f55\u4f7f\u7528 Urllib \u6642\u4e5f\u6c92\u5beb\u5230 socket\uff0c\u4f46\u4e00\u6a23\u80fd\u53d6\u56de\u8cc7\u6599\uff1f",(0,t.jsx)(n.br,{}),"\n","\u90a3\u662f\u56e0\u70ba socket \u662f\u5f88\u5e95\u5c64\u7684\u908f\u8f2f\uff0c\u7576\u4f7f\u7528 Urllib \u9019\u500b\u5957\u4ef6\u6642\uff0c\u5176\u5be6 socket \u7684\u908f\u8f2f\u5df2\u7d93\u5c01\u88dd\u5728\u88e1\u9762\u4e86\u3002"]})}),"\n",(0,t.jsx)(n.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.coursera.org/specializations/python",children:"Programming for Everybody"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},89587:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/ASCII-ffc9646f844e0118d6ec0aa9edc6994f.png"},23426:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/socket01-698770c6849adeba71a64323a0681c4e.png"},41734:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/unicode-1236c6fe4403abee593125c1da96c86a.png"},11151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>l});var t=s(67294);const r={},c=t.createContext(r);function l(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);