"use strict";(self.webpackChunkcode_fictionist=self.webpackChunkcode_fictionist||[]).push([[4073],{6988:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var s=i(5893),r=i(1151);const t={title:"py4e - Using Databases",tags:["python"]},a=void 0,l={id:"\u7a0b\u5f0f\u8a9e\u8a00/Python/coursera-m4",title:"py4e - Using Databases",description:"Object-oriented programming",source:"@site/docs/\u7a0b\u5f0f\u8a9e\u8a00/Python/04-coursera-m4.mdx",sourceDirName:"\u7a0b\u5f0f\u8a9e\u8a00/Python",slug:"/\u7a0b\u5f0f\u8a9e\u8a00/Python/coursera-m4",permalink:"/docs/\u7a0b\u5f0f\u8a9e\u8a00/Python/coursera-m4",draft:!1,unlisted:!1,tags:[{label:"python",permalink:"/docs/tags/python"}],version:"current",sidebarPosition:4,frontMatter:{title:"py4e - Using Databases",tags:["python"]},sidebar:"programSidebar",previous:{title:"py4e - Access Web Data",permalink:"/docs/\u7a0b\u5f0f\u8a9e\u8a00/Python/coursera-m3"},next:{title:"\u5e38\u7528\u7684\u56db\u7a2e\u4e32 API \u65b9\u5f0f",permalink:"/docs/\u7b46\u8a18\u672c/\u7db2\u9801\u958b\u767c/api-fetch"}},o={},c=[{value:"Object-oriented programming",id:"object-oriented-programming",level:2},{value:"SQLite",id:"sqlite",level:2},{value:"Install SQLite",id:"install-sqlite",level:3},{value:"Create Table",id:"create-table",level:3},{value:"Add Data",id:"add-data",level:3},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:3},{value:"SQLite in Python",id:"sqlite-in-python",level:3},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"object-oriented-programming",children:"Object-oriented programming"}),"\n",(0,s.jsx)(n.p,{children:"OOP \u4e2d\u6709\u5e7e\u500b\u57fa\u790e\u7684\u5b9a\u7fa9\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"class"}),"\uff1a\u5b9a\u7fa9\u4e86\u4e00\u500b\u7269\u4ef6\uff0c\u76f8\u7576\u65bc\u5b9a\u7fa9\u4e86\u4e00\u500b\u85cd\u5716\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"method"})," (or ",(0,s.jsx)(n.code,{children:"message"}),")\uff1a\u5b9a\u7fa9\u4e86\u4f7f\u7528\u8cc7\u6599\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"attribute"})," (or ",(0,s.jsx)(n.code,{children:"field"}),")\uff1a\u5b9a\u7fa9\u8cc7\u6599\u7684\u5f62\u5f0f\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"object"}),"\uff1a\u900f\u904e ",(0,s.jsx)(n.code,{children:"class"})," \u5b9a\u7fa9\u51fa\u4f86\u7684\u5be6\u4f8b\uff0c\u4e5f\u5c31\u662f\u4e00\u5f35\u5305\u542b\u8cc7\u6599\u8207\u65b9\u6cd5\u7684\u85cd\u5716\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",metastring:"title='Simple OOP example'",children:"# Animal \u662f\u4e00\u5f35\u85cd\u5716\nclass Animal:\n    x = 0\n\n    def sumAnimals(self):\n        self.x = self.x + 1\n        print('There are',self.x, 'animals')\n\n# \u7528 Animal \u9019\u5f35\u85cd\u5716\u5efa\u7acb\u4e00\u500b\u5be6\u4f8b\u4e26\u5b58\u9032\u4e00\u500b\u8b8a\u6578\u4e2d\ndog = Animal()\ndog.sumAnimals() # There are 1 animals\ndog.sumAnimals() # There are 2 animals\ndog.sumAnimals() # There are 3 animals\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u7528 ",(0,s.jsx)(n.code,{children:"type()"})," \u67e5\u770b\u7269\u4ef6\u539f\u578b\u3002",(0,s.jsx)(n.br,{}),"\n","\u53ef\u4ee5\u7528 ",(0,s.jsx)(n.code,{children:"dir()"})," \u67e5\u770b\u5c6c\u6027\u8207\u65b9\u6cd5\u3002"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"print(type(dog)) # <class '__main__.Animal'>\nprint(dir(dog))\n"})})]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["\u5b9a\u7fa9\u7269\u4ef6\u6642\uff0c\u51fd\u5f0f\u7684\u7b2c\u4e00\u500b\u53c3\u6578\u90fd\u8981\u4ee3\u5165 ",(0,s.jsx)(n.code,{children:"self"}),"\uff0c\u8868\u793a\u53ef\u4ee5\u900f\u904e\u9019\u500b\u7269\u4ef6\u4f86\u5f15\u7528\u9019\u500b\u65b9\u6cd5\u3002"]})}),"\n",(0,s.jsx)(n.p,{children:"OOP \u4e09\u5927\u7279\u6027\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5c01\u88dd (Encapsulation)\uff1a\u5c07\u7269\u4ef6\u5167\u90e8\u7684\u8cc7\u6599\u8207\u65b9\u6cd5\u96b1\u85cf\u8d77\u4f86\uff0c\u4f7f\u7528\u8005\u53ea\u80fd\u900f\u904e\u7269\u4ef6\u63d0\u4f9b\u7684\u4ecb\u9762\u53bb\u53d6\u5f97\u5167\u90e8\u7684\u5167\u5bb9\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u7e7c\u627f (Inheritance)\uff1a\u7236\u985e\u5225\u901a\u5e38\u662f\u6982\u62ec\u5f0f\u7684\u7269\u4ef6\uff0c\u5b50\u985e\u5225\u53ef\u4ee5\u7e7c\u627f\u7236\u985e\u5225\u7684\u6240\u6709\u5167\u5bb9\u4e26\u81ea\u884c\u6dfb\u52a0\u4e00\u4e9b\u7d30\u7bc0\uff0c\u6bd4\u5982 ",(0,s.jsx)(n.code,{children:"\u72d7 (\u7236\u985e\u5225)"})," \u548c ",(0,s.jsx)(n.code,{children:"\u67f4\u72ac (\u5b50\u985e\u5225)"}),"\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u591a\u578b (Polymorphism)\uff1a\u6307\u7684\u662f\u540c\u6a23\u7684\u64cd\u4f5c\uff0c\u91dd\u5c0d\u4e0d\u4e00\u6a23\u7684\u7269\u4ef6\u6703\u6709\u4e0d\u4e00\u6a23\u7684\u7d50\u679c\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"class Car:\n    wheels = 4\n    def highSpeed(self, speed):\n        print('Max high speed:', speed, 'km')\n    def country(self):\n        print('No country')\n\n# \u7e7c\u627f\nclass Bugatti(Car):\n    system = '4matic'\n    def country(self):\n        print('France')\n\nclass Porche(Car):\n    system = '2matic'\n    def country(self):\n        print('Germany')\n\nchiron = Bugatti()\ntaycan = Porche()\nchiron.highSpeed(289) # Max high speed: 289 km\ntaycan.highSpeed(266) # Max high speed: 266 km\n\n# \u591a\u578b\ndef showCountry(car):\n    car.country()\nshowCountry(chiron) # France\nshowCountry(taycan) # Germany\n"})}),"\n",(0,s.jsx)(n.h2,{id:"sqlite",children:"SQLite"}),"\n",(0,s.jsx)(n.h3,{id:"install-sqlite",children:"Install SQLite"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://sqlitebrowser.org/dl/",children:"SQLite"})})}),"\n",(0,s.jsx)(n.p,{children:"\u8a18\u5f97\u5b89\u88dd\u6642\u8981\u52fe\u9078\u65b0\u589e\u5230\u684c\u9762\u6216\u61c9\u7528\u7a0b\u5f0f\u5217\uff0c\u4e0d\u7136\u6703\u627e\u4e0d\u5230\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"create-table",children:"Create Table"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE Ages ( \n  name VARCHAR(128), \n  age INTEGER\n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"add-data",children:"Add Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"DELETE FROM Ages;\nINSERT INTO Ages (name, age) VALUES ('Morgan', 39);\nINSERT INTO Ages (name, age) VALUES ('Eveline', 20);\nINSERT INTO Ages (name, age) VALUES ('Eshal', 31);\nINSERT INTO Ages (name, age) VALUES ('Mackenzie', 39);\nINSERT INTO Ages (name, age) VALUES ('Sinem', 28);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u57fa\u672c\u64cd\u4f5c",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,s.jsx)(n.p,{children:"\u5c07 name \u548c age \u6b04\u4f4d\u7d44\u5408\u6210\u4e00\u500b\u65b0\u7684\u5341\u516d\u9032\u5236\u5b57\u4e32\uff0c\u4e26\u6309\u7167\u9019\u500b\u5b57\u4e32\u7684\u503c\u5c0d\u7d50\u679c\u9032\u884c\u6392\u5e8f\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT hex(name || age) AS X FROM Ages ORDER BY X\n"})}),"\n",(0,s.jsx)(n.h3,{id:"sqlite-in-python",children:"SQLite in Python"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-py",children:"import sqlite3\n\n# \u8207 SQLite \u8cc7\u6599\u5eab\u5efa\u7acb\u806f\u7e6b\u4e26\u5efa\u7acb cursor \u624d\u53ef\u4ee5\u5728\u8cc7\u6599\u5eab\u4e2d\u67e5\u8a62\nconn = sqlite3.connect('sql-work-01.sqlite')\ncur = conn.cursor()\n\n# \u5148\u522a\u9664\u53ef\u80fd\u5b58\u5728\u7684\u8868\u683c\ncur.execute('DROP TABLE IF EXISTS Counts')\n\n# \u5efa\u7acb Counts \u8868\u683c\ncur.execute('''\nCREATE TABLE Counts (org TEXT, count INTEGER)''')\n\nfname = 'mbox.txt'\nfh = open(fname)\nfor line in fh:\n    if not line.startswith('From: '): continue\n    pieces = line.split()\n    email = pieces[1]\n    # \u5f9eemail\u4e2d\u63d0\u53d6\u7d44\u7e54\u90e8\u5206\uff08\u5373\u57df\u540d\uff09\n    org = email.split('@')[1]\n    # `?` \u8868\u793a\u4f54\u4f4d\u7b26\uff0c\u662f\u8b93\u5f8c\u9762\u7684 email \u8b8a\u6578\u4ee3\u5165\u7684\n    cur.execute('SELECT count FROM Counts WHERE org = ? ', (org,))\n    # \u5f9e\u67e5\u8a62\u7d50\u679c\u4e2d\u7372\u53d6\u4e00\u884c\u6578\u64da\n    row = cur.fetchone()\n    # \u5982\u679cemail\u4e0d\u5b58\u5728\uff0c\u5247\u63d2\u5165\u65b0\u8a18\u9304\n    if row is None:\n        cur.execute('''INSERT INTO Counts (org, count)\n                VALUES (?, 1)''', (org,))\n    # \u5982\u679cemail\u5b58\u5728\uff0c\u5247\u66f4\u65b0count\u503c\u52a01\n    else:\n        cur.execute('UPDATE Counts SET count = count + 1 WHERE org = ?',\n                    (org,))\n    # \u5c07\u67e5\u8a62\u8a9e\u53e5\u548c\u66f4\u65b0\u8a9e\u53e5\u7684\u7d50\u679c\u90fd\u63d0\u4ea4\u5230\u8cc7\u6599\u5eab\u4e2d\n    conn.commit()\n\nsqlstr = 'SELECT org, count FROM Counts ORDER BY count DESC LIMIT 10'\n# \u5370\u51fa\u524d 10 \u500b\u7d50\u679c\u7684 email \u548c count \u503c\nfor row in cur.execute(sqlstr):\n    print(str(row[0]), row[1])\n\ncur.close()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.coursera.org/specializations/python",children:"Programming for Everybody"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://totoroliu.medium.com/%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91-object-oriented-programming-%E6%A6%82%E5%BF%B5-5f205d437fd6",children:"\u7269\u4ef6\u5c0e\u5411(Object Oriented Programming)\u6982\u5ff5"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>a});var s=i(7294);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);