"use strict";(self.webpackChunkcode_fictionist=self.webpackChunkcode_fictionist||[]).push([[8377],{37995:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=t(85893),s=t(11151);const i={title:"\u5b98\u65b9\u6559\u5b78 - \u975c\u614b\u8207\u52d5\u614b\u6e32\u67d3",tags:["react","next","render"]},r=void 0,o={id:"tech_articles/framework/React/next-render",title:"\u5b98\u65b9\u6559\u5b78 - \u975c\u614b\u8207\u52d5\u614b\u6e32\u67d3",description:"Static Rendering",source:"@site/docs/tech_articles/03-framework/01-React/07-next-render.mdx",sourceDirName:"tech_articles/03-framework/01-React",slug:"/tech_articles/framework/React/next-render",permalink:"/docs/tech_articles/framework/React/next-render",draft:!1,unlisted:!1,tags:[{inline:!0,label:"react",permalink:"/docs/tags/react"},{inline:!0,label:"next",permalink:"/docs/tags/next"},{inline:!0,label:"render",permalink:"/docs/tags/render"}],version:"current",sidebarPosition:7,frontMatter:{title:"\u5b98\u65b9\u6559\u5b78 - \u975c\u614b\u8207\u52d5\u614b\u6e32\u67d3",tags:["react","next","render"]},sidebar:"programSidebar",previous:{title:"Next - \u8cc7\u6599\u5eab\u64cd\u4f5c\u8207 API",permalink:"/docs/tech_articles/framework/React/next_database"},next:{title:"\u5b98\u65b9\u6559\u5b78 - \u641c\u5c0b\u8207\u5206\u9801",permalink:"/docs/tech_articles/framework/React/next-search"}},l={},c=[{value:"Static Rendering",id:"static-rendering",level:2},{value:"Dynamic Rendering",id:"dynamic-rendering",level:2},{value:"\u88fd\u4f5c\u52d5\u614b\u6e32\u67d3\u9801\u9762",id:"\u88fd\u4f5c\u52d5\u614b\u6e32\u67d3\u9801\u9762",level:3},{value:"Streaming",id:"streaming",level:2},{value:"<strong>loading.tsx</strong> - Streaming a whole page",id:"loadingtsx---streaming-a-whole-page",level:3},{value:"route groups",id:"route-groups",level:4},{value:"<code>&lt;Suspense&gt;</code> - Streaming a component",id:"suspense---streaming-a-component",level:2},{value:"\u7df4\u7fd2\u984c - Streaming <code>&lt;LatestInvoices&gt;</code>",id:"\u7df4\u7fd2\u984c---streaming-latestinvoices",level:4},{value:"Grouping components",id:"grouping-components",level:3}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"static-rendering",children:"Static Rendering"}),"\n",(0,a.jsxs)(n.p,{children:["\u975c\u614b\u6e32\u67d3\u9069\u7528\u65bc\u6c92\u6709\u6578\u64da\u6216\u6578\u64da\u662f\u6240\u6709\u7528\u6236\u5171\u4eab\u7684 UI\uff0c\u5982\u90e8\u843d\u683c\u6216\u5546\u54c1\u9801\u9762\u3002",(0,a.jsx)(n.br,{}),"\n","\u975c\u614b\u6e32\u67d3\u662f\u5728\u90e8\u7f72\uff08\u6216\u91cd\u65b0\u9a57\u8b49\u6642\uff09\u7684\u5efa\u69cb\u968e\u6bb5\u5728\u4f3a\u670d\u5668\u4e0a\u9032\u884c\u6578\u64da\u7372\u53d6\u548c\u6e32\u67d3\uff0c\u7d50\u679c\u53ef\u5206\u767c\u5728\u5167\u5bb9\u50b3\u905e\u7db2\u7d61\uff08CDN\uff09\u4e2d\u7de9\u5b58\u3002"]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.cloudflare.com/zh-tw/learning/cdn/what-is-a-cdn/",children:"CDN\u662f\u4ec0\u9ebc\uff1f| CDN \u7684\u5de5\u4f5c\u539f\u7406\u53ca\u7528\u9014"})})}),"\n",(0,a.jsx)(n.p,{children:"\u5b98\u65b9\u7bc4\u4f8b\u63d0\u5230\u975c\u614b\u6e32\u67d3\u900f\u904e\u7de9\u5b58\u4e3b\u8981\u5e36\u4f86\u4e0b\u5217\u76ca\u8655\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u901f\u5ea6\u66f4\u5feb\u7684\u7db2\u7ad9\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u964d\u4f4e\u4f3a\u670d\u5668\u8ca0\u64d4\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u63d0\u9ad8 SEO\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"dynamic-rendering",children:"Dynamic Rendering"}),"\n",(0,a.jsxs)(n.p,{children:["\u52d5\u614b\u6e32\u67d3\u9069\u7528\u65bc\u9700\u8981\u5373\u6642\u6578\u64da\u6216\u500b\u4eba\u5316\u5167\u5bb9\u7684\u7db2\u9801\uff0c\u80fd\u5920\u6839\u64da\u7528\u6236\u7684\u5177\u9ad4\u9700\u6c42\u4f86\u5b9a\u5236\u5167\u5bb9\u548c\u63d0\u4f9b\u5be6\u6642\u8cc7\u8a0a\u3002",(0,a.jsx)(n.br,{}),"\n","\u6240\u4ee5\u52d5\u614b\u6e32\u67d3\u662f\u5728",(0,a.jsx)(n.strong,{children:"\u7528\u6236\u8acb\u6c42\u6642 (\u7576\u7528\u6236\u8a2a\u554f\u9801\u9762\u6642)"})," \u624d\u5728\u4f3a\u670d\u5668\u4e0a\u6e32\u67d3\u5167\u5bb9\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u5177\u9ad4\u4f86\u8aaa\uff0c\u52d5\u614b\u6e32\u67d3\u5c31\u662f\u96a8\u8457\u4f7f\u7528\u8005\u4e92\u52d5\u800c\u6539\u8b8a\u6e32\u67d3\u5167\u5bb9\u7684\u65b9\u6cd5\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u88fd\u4f5c\u52d5\u614b\u6e32\u67d3\u9801\u9762",children:"\u88fd\u4f5c\u52d5\u614b\u6e32\u67d3\u9801\u9762"}),"\n",(0,a.jsxs)(n.p,{children:["\u53ea\u8981\u5728 server component \u6216\u7372\u53d6\u8cc7\u6599\u7684\u51fd\u5f0f\u4e2d\u4f7f\u7528 Next \u63d0\u4f9b\u7684 ",(0,a.jsx)(n.strong,{children:"unstable_noStore"})," API \u5c31\u53ef\u4ee5\u9000\u51fa\u975c\u614b\u6e32\u67d3\u6539\u7528\u52d5\u614b\u6e32\u67d3\u3002",(0,a.jsx)(n.br,{}),"\n","\u5b98\u65b9\u7bc4\u4f8b\u662f\u4f7f\u7528\u5728 ",(0,a.jsx)(n.strong,{children:"data.ts"})," \u4e2d\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:"title='/app/lib/data.ts'",children:"// ...\n// highlight-next-line\nimport { unstable_noStore as noStore } from 'next/cache';\n \nexport async function fetchRevenue() {\n  // Add noStore() here to prevent the response from being cached.\n  // This is equivalent to in fetch(..., {cache: 'no-store'}).\n  // highlight-next-line\n  noStore();\n \n  // ...\n}\n \nexport async function fetchLatestInvoices() {\n    // highlight-next-line\n  noStore();\n  // ...\n}\n// ...\n"})}),"\n",(0,a.jsx)(n.h2,{id:"streaming",children:"Streaming"}),"\n",(0,a.jsxs)(n.p,{children:["\u52d5\u614b\u6e32\u67d3\u6709\u500b\u554f\u984c\uff0c\u56e0\u70ba\u5b83\u6703\u5373\u6642\u8acb\u6c42\u8cc7\u8a0a\u56de\u4f86\u505a\u6e32\u67d3\uff0c\u56e0\u6b64\u82e5\u8acb\u6c42\u8017\u8cbb\u6642\u9593\u904e\u9577\u5c31\u6703\u9020\u6210\u6e32\u67d3\u554f\u984c\uff0c\u5c0e\u81f4\u4f7f\u7528\u8005\u9ad4\u9a57\u4e0d\u4f73\u3002",(0,a.jsx)(n.br,{}),"\n","Next \u4e2d\u53ef\u4ee5\u4f7f\u7528 streaming \u4f86\u89e3\u6c7a\u4e0a\u8ff0\u554f\u984c\uff0c\u6839\u64da Next \u7684\u5b98\u65b9\u89e3\u91cb\u7ffb\u8b6f\uff0cstreaming\uff08\u4e32\u6d41\uff09\u662f\u4e00\u7a2e\u6578\u64da\u50b3\u8f38\u6280\u8853\uff0c\u53ef\u4ee5\u5c07\u4e00\u500b\u8acb\u6c42\u7684\u6578\u64da\u5206\u5272\u6210\u591a\u500b\u8f03\u5c0f\u7684\u90e8\u5206 (chunks)\uff0c\u4e26\u96a8\u8457\u9019\u4e9b\u90e8\u5206\u6e96\u5099\u597d\u5f8c\uff0c\u9010\u6b65\u5f9e\u670d\u52d9\u5668\u7aef\u50b3\u8f38\u5230\u5ba2\u6236\u7aef\u3002\u56e0\u6b64\u53ef\u4ee5\u907f\u514d\u56e0\u70ba\u6162\u901f\u7684\u6578\u64da\u8acb\u6c42\u800c\u963b\u585e\u6574\u500b\u9801\u9762\u7684\u52a0\u8f09\uff0c\u5f9e\u800c\u8b93\u7528\u6236\u5728\u7b49\u5f85\u6240\u6709\u6578\u64da\u52a0\u8f09\u5b8c\u6210\u4e4b\u524d\uff0c\u5c31\u80fd\u770b\u5230\u4e26\u8207\u9801\u9762\u7684\u67d0\u4e9b\u90e8\u5206\u9032\u884c\u4e92\u52d5\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"Next \u4e2d\u6709\u5169\u7a2e\u8fa6\u6cd5\u53ef\u4ee5\u505a\u5230 streaming\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"loading.tsx"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"<Suspense>"})}),"\n"]}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:"\u5728\u7e7c\u7e8c\u4e4b\u524d\uff0c\u5148\u6539\u4e00\u4e0b code \u6a21\u64ec\u6162\u901f\u8acb\u6c42\u3002"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:"title='/app/lib/data.ts'",children:"export async function fetchRevenue() {\n  try {\n    // We artificially delay a response for demo purposes.\n    // Don't do this in production :)\n    // highlight-start\n    console.log('Fetching revenue data...');\n    await new Promise((resolve) => setTimeout(resolve, 3000));\n    // highlight-end\n \n    const data = await sql<Revenue>`SELECT * FROM revenue`;\n    // highlight-next-line\n    console.log('Data fetch completed after 3 seconds.');\n \n    return data.rows;\n  } catch (error) {\n    console.error('Database Error:', error);\n    throw new Error('Failed to fetch revenue data.');\n  }\n}\n"})})]}),"\n",(0,a.jsxs)(n.h3,{id:"loadingtsx---streaming-a-whole-page",children:[(0,a.jsx)(n.strong,{children:"loading.tsx"})," - Streaming a whole page"]}),"\n",(0,a.jsx)(n.p,{children:"\u8b1b\u767d\u4e86\u5c31\u662f\u505a\u4e00\u500b loading page \u4f86\u8b93\u4f7f\u7528\u8005\u5728\u8cc7\u6599\u56de\u4f86\u524d\u5148\u80fd\u770b\u5230\u4e00\u500b\u756b\u9762\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/dashboard/loading.tsx'",children:"export default function Loading() {\n  return <div>Loading...</div>;\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528 loading skeletons\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/dashboard/loading.tsx'",children:"import DashboardSkeleton from '@/app/ui/skeletons';\n \nexport default function Loading() {\n  return <DashboardSkeleton />;\n}\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.h4,{id:"route-groups",children:"route groups"}),(0,a.jsxs)(n.p,{children:["\u56e0\u70ba\u73fe\u5728 ",(0,a.jsx)(n.strong,{children:"/app/dashboard/loading.tsx"})," \u7684\u5c64\u7d1a\u5728 ",(0,a.jsx)(n.strong,{children:"/invoices/page.tsx"})," \u8ddf ",(0,a.jsx)(n.strong,{children:"/customers/page.tsx"})," \u4e4b\u4e0a\uff0c\u6240\u4ee5\u4ed6\u5011\u4e5f\u90fd\u6703\u5957\u7528\u5230\u9019\u500b loading page\u3002",(0,a.jsx)(n.br,{}),"\n","\u5982\u679c\u53ea\u60f3\u628a loading page \u61c9\u7528\u5728 ",(0,a.jsx)(n.strong,{children:"/dashboard"})," \u9019\u500b\u8def\u7531\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(n.strong,{children:"route groups"}),"\uff1a"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"---| /dashboard\n------| (overview)\n---------| loading.tsx\n---------| page.tsx\n"})}),(0,a.jsxs)(n.p,{children:["\u900f\u904e ",(0,a.jsx)(n.strong,{children:"()"})," \u5305\u8d77\u4f86\u7684\u8cc7\u6599\u593e\u540d\u7a31\u4e0d\u6703\u5305\u542b\u5728 URL \u8def\u5f91\u4e2d\uff0c\u56e0\u6b64\uff0c",(0,a.jsx)(n.strong,{children:"/dashboard/(overview)/page.tsx"})," \u6703\u88ab\u8f49\u63db\u6210 ",(0,a.jsx)(n.strong,{children:"/dashboard"})," \u7684\u8def\u7531\u3002"]})]}),"\n",(0,a.jsxs)(n.h2,{id:"suspense---streaming-a-component",children:[(0,a.jsx)(n.code,{children:"<Suspense>"})," - Streaming a component"]}),"\n",(0,a.jsxs)(n.p,{children:["\u8981\u505a\u5230\u50c5 ",(0,a.jsx)(n.strong,{children:"Streaming a component"}),"\uff0c\u6709\u5e7e\u500b\u95dc\u9375\uff1a"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"<Suspense>"})]}),"\n",(0,a.jsx)(n.li,{children:"\u5c07\u8cc7\u6599\u7372\u53d6\u6539\u6210\u5728\u5b50\u5143\u4ef6\u4e2d\u53d6"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u4f9d\u5b98\u65b9\u7bc4\u4f8b\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u5148\u628a ",(0,a.jsx)(n.code,{children:"fetchRevenue()"})," \u53ca\u76f8\u95dc\u8cc7\u6599\u79fb\u9664\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/dashboard/(overview)/page.tsx'",children:"import { Card } from '@/app/ui/dashboard/cards';\nimport RevenueChart from '@/app/ui/dashboard/revenue-chart';\nimport LatestInvoices from '@/app/ui/dashboard/latest-invoices';\nimport { lusitana } from '@/app/ui/fonts';\n// highlight-next-line\nimport { fetchLatestInvoices, fetchCardData } from '@/app/lib/data'; // remove fetchRevenue\n \nexport default async function Page() {\n  // highlight-next-line\n  const revenue = await fetchRevenue // delete this line\n  const latestInvoices = await fetchLatestInvoices();\n  const {\n    numberOfInvoices,\n    numberOfCustomers,\n    totalPaidInvoices,\n    totalPendingInvoices,\n  } = await fetchCardData();\n \n  return (\n    // ...\n  );\n}\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"<Suspense>"})]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/dashboard/(overview)/page.tsx'",children:'import { Card } from \'@/app/ui/dashboard/cards\';\nimport RevenueChart from \'@/app/ui/dashboard/revenue-chart\';\nimport LatestInvoices from \'@/app/ui/dashboard/latest-invoices\';\nimport { lusitana } from \'@/app/ui/fonts\';\nimport { fetchLatestInvoices, fetchCardData } from \'@/app/lib/data\';\n// highlight-start\nimport { Suspense } from \'react\';\nimport { RevenueChartSkeleton } from \'@/app/ui/skeletons\';\n// highlight-end\n \nexport default async function Page() {\n  const latestInvoices = await fetchLatestInvoices();\n  const {\n    numberOfInvoices,\n    numberOfCustomers,\n    totalPaidInvoices,\n    totalPendingInvoices,\n  } = await fetchCardData();\n \n  return (\n    <main>\n      <h1 className={`${lusitana.className} mb-4 text-xl md:text-2xl`}>\n        Dashboard\n      </h1>\n      <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">\n        <Card title="Collected" value={totalPaidInvoices} type="collected" />\n        <Card title="Pending" value={totalPendingInvoices} type="pending" />\n        <Card title="Total Invoices" value={numberOfInvoices} type="invoices" />\n        <Card\n          title="Total Customers"\n          value={numberOfCustomers}\n          type="customers"\n        />\n      </div>\n      <div className="mt-6 grid grid-cols-1 gap-6 md:grid-cols-4 lg:grid-cols-8">\n        {/* highlight-start */}\n        <Suspense fallback={<RevenueChartSkeleton />}>\n          <RevenueChart />\n        </Suspense>\n        {/* highlight-end */}\n        <LatestInvoices latestInvoices={latestInvoices} />\n      </div>\n    </main>\n  );\n}\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsxs)(n.li,{children:["\u5230\u5b50\u5143\u4ef6 ",(0,a.jsx)(n.code,{children:"<RevenueChart>"})," \u4e2d\u505a\u8cc7\u6599\u7372\u53d6\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/ui/dashboard/revenue-chart.tsx'",children:"import { generateYAxis } from '@/app/lib/utils';\nimport { CalendarIcon } from '@heroicons/react/24/outline';\nimport { lusitana } from '@/app/ui/fonts';\n// highlight-next-line\nimport { fetchRevenue } from '@/app/lib/data';\n \n// ...\n// highlight-start\nexport default async function RevenueChart() { // Make component async, remove the props\n  const revenue = await fetchRevenue(); // Fetch data inside the component\n// highlight-end\n  const chartHeight = 350;\n  const { yAxisLabels, topLabel } = generateYAxis(revenue);\n \n  if (!revenue || revenue.length === 0) {\n    return <p className=\"mt-4 text-gray-400\">No data available.</p>;\n  }\n \n  return (\n    // ...\n  );\n}\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["\u60f3\u6a21\u64ec\u5ef6\u9072\u6548\u679c\uff0c\u6bd4\u7167\u4e0a\u8ff0\u53bb ",(0,a.jsx)(n.strong,{children:"/app/lib/data.ts"})," \u8cc7\u6599\u7372\u53d6\u51fd\u5f0f\u6dfb\u52a0 ",(0,a.jsx)(n.code,{children:"await new Promise((resolve) => setTimeout(resolve, 3000))"})]})}),"\n",(0,a.jsxs)(n.admonition,{type:"note",children:[(0,a.jsxs)(n.h4,{id:"\u7df4\u7fd2\u984c---streaming-latestinvoices",children:["\u7df4\u7fd2\u984c - Streaming ",(0,a.jsx)(n.code,{children:"<LatestInvoices>"})]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/dashboard/(overview)/page.tsx'",children:'import { Card } from \'@/app/ui/dashboard/cards\';\nimport RevenueChart from \'@/app/ui/dashboard/revenue-chart\';\nimport LatestInvoices from \'@/app/ui/dashboard/latest-invoices\';\nimport { lusitana } from \'@/app/ui/fonts\';\n// highlight-next-line\nimport { fetchCardData } from \'@/app/lib/data\'; // Remove fetchLatestInvoices\nimport { Suspense } from \'react\';\nimport {\n  RevenueChartSkeleton,\n// highlight-next-line\n  LatestInvoicesSkeleton,\n} from \'@/app/ui/skeletons\';\n \nexport default async function Page() {\n  // highlight-next-line\n  // Remove `const latestInvoices = await fetchLatestInvoices()`\n  const {\n    numberOfInvoices,\n    numberOfCustomers,\n    totalPaidInvoices,\n    totalPendingInvoices,\n  } = await fetchCardData();\n \n  return (\n    <main>\n      <h1 className={`${lusitana.className} mb-4 text-xl md:text-2xl`}>\n        Dashboard\n      </h1>\n      <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">\n        <Card title="Collected" value={totalPaidInvoices} type="collected" />\n        <Card title="Pending" value={totalPendingInvoices} type="pending" />\n        <Card title="Total Invoices" value={numberOfInvoices} type="invoices" />\n        <Card\n          title="Total Customers"\n          value={numberOfCustomers}\n          type="customers"\n        />\n      </div>\n      <div className="mt-6 grid grid-cols-1 gap-6 md:grid-cols-4 lg:grid-cols-8">\n        <Suspense fallback={<RevenueChartSkeleton />}>\n          <RevenueChart />\n        </Suspense>\n        {/* highlight-start */}\n        <Suspense fallback={<LatestInvoicesSkeleton />}>\n          <LatestInvoices />\n        </Suspense>\n        {/* highlight-end */}\n      </div>\n    </main>\n  );\n}\n'})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/ui/dashboard/latest-invoices.tsx'",children:"import { ArrowPathIcon } from '@heroicons/react/24/outline';\nimport clsx from 'clsx';\nimport Image from 'next/image';\nimport { lusitana } from '@/app/ui/fonts';\n// highlight-next-line\nimport { fetchLatestInvoices } from '@/app/lib/data';\n \n//  highlight-start\nexport default async function LatestInvoices() { // Remove props\n  const latestInvoices = await fetchLatestInvoices();\n// highlight-end\n  return (\n    // ...\n  );\n}\n"})})]}),"\n",(0,a.jsx)(n.h3,{id:"grouping-components",children:"Grouping components"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<Card title="Collected" value={totalPaidInvoices} type="collected" />\n<Card title="Pending" value={totalPendingInvoices} type="pending" />\n<Card title="Total Invoices" value={numberOfInvoices} type="invoices" />\n<Card\n  title="Total Customers"\n  value={numberOfCustomers}\n  type="customers"\n/>\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u9019\u662f\u76ee\u524d ",(0,a.jsx)(n.code,{children:"<Card>"})," \u5143\u4ef6\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5982\u679c\u8981\u70ba\u6bcf\u500b ",(0,a.jsx)(n.code,{children:"<Card>"})," \u5143\u4ef6\u52a0\u4e0a ",(0,a.jsx)(n.code,{children:"<Suspense>"})," \u7136\u5f8c\u70ba\u6bcf\u500b\u500b\u5225\u7684\u5361\u7247\u6293\u53d6\u6578\u64da\uff0c\u53ef\u80fd\u6703\u9020\u6210\u7576\u5361\u7247\u52a0\u8f09\u9032\u4f86\u6642\u51fa\u73fe ",(0,a.jsx)(n.strong,{children:"popping"})," \u6548\u679c\uff0c\u53ef\u80fd\u5f71\u97ff\u7528\u6236\u9ad4\u9a57\u3002",(0,a.jsx)(n.br,{}),"\n","\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0cNext \u63d0\u51fa\u4e86 ",(0,a.jsx)(n.strong,{children:"Grouping components"})," \u7684\u89e3\u6cd5\u3002"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u522a\u9664\u539f\u672c\u7684 ",(0,a.jsx)(n.code,{children:"<Card>"})," \u5143\u4ef6\u3001",(0,a.jsx)(n.code,{children:"fetchCardData()"})," \u51fd\u5f0f\uff0c\u4e26\u505a\u4e0b\u5217\u8abf\u6574\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/dashboard/page.tsx'",children:"// highlight-next-line\nimport CardWrapper from '@/app/ui/dashboard/cards';\n// ...\nimport {\n  RevenueChartSkeleton,\n  LatestInvoicesSkeleton,\n  // highlight-next-line\n  CardsSkeleton,\n} from '@/app/ui/skeletons';\n \nexport default async function Page() {\n  return (\n    <main>\n      <h1 className={`${lusitana.className} mb-4 text-xl md:text-2xl`}>\n        Dashboard\n      </h1>\n      <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-4\">\n        {/* highlight-start */}\n        <Suspense fallback={<CardsSkeleton />}>\n          <CardWrapper />\n        </Suspense>\n        {/* highlight-end */}\n      </div>\n      // ...\n    </main>\n  );\n}\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["\u5728 ",(0,a.jsx)(n.strong,{children:"/app/ui/dashboard/cards.tsx"})," \u88e1\u9762\u9032\u884c\u8cc7\u6599\u7372\u53d6\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:"title='/app/ui/dashboard/cards.tsx'",children:'// ...\n// highlight-next-line\nimport { fetchCardData } from \'@/app/lib/data\';\n \n// ...\n \nexport default async function CardWrapper() {\n  // highlight-start\n  const {\n    numberOfInvoices,\n    numberOfCustomers,\n    totalPaidInvoices,\n    totalPendingInvoices,\n  } = await fetchCardData();\n  // highlight-end\n \n  return (\n    <>\n      <Card title="Collected" value={totalPaidInvoices} type="collected" />\n      <Card title="Pending" value={totalPendingInvoices} type="pending" />\n      <Card title="Total Invoices" value={numberOfInvoices} type="invoices" />\n      <Card\n        title="Total Customers"\n        value={numberOfCustomers}\n        type="customers"\n      />\n    </>\n  );\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>r});var a=t(67294);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);