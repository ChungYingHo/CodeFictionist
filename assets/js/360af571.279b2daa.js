"use strict";(self.webpackChunkcode_fictionist=self.webpackChunkcode_fictionist||[]).push([[1477],{39050:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>a});var c=s(85893),l=s(11151);const r={title:"\u975e\u540c\u6b65\u8655\u7406",tags:["javascript","callback","promise","async/await"]},i=void 0,o={id:"\u7a0b\u5f0f\u8a9e\u8a00/JavaScript/asynchronous",title:"\u975e\u540c\u6b65\u8655\u7406",description:"Event Loop",source:"@site/docs/\u7a0b\u5f0f\u8a9e\u8a00/JavaScript/04-asynchronous.mdx",sourceDirName:"\u7a0b\u5f0f\u8a9e\u8a00/JavaScript",slug:"/\u7a0b\u5f0f\u8a9e\u8a00/JavaScript/asynchronous",permalink:"/docs/\u7a0b\u5f0f\u8a9e\u8a00/JavaScript/asynchronous",draft:!1,unlisted:!1,tags:[{label:"javascript",permalink:"/docs/tags/javascript"},{label:"callback",permalink:"/docs/tags/callback"},{label:"promise",permalink:"/docs/tags/promise"},{label:"async/await",permalink:"/docs/tags/async-await"}],version:"current",sidebarPosition:4,frontMatter:{title:"\u975e\u540c\u6b65\u8655\u7406",tags:["javascript","callback","promise","async/await"]},sidebar:"programSidebar",previous:{title:"String (\u5b57\u4e32) \u57fa\u672c\u64cd\u4f5c",permalink:"/docs/\u7a0b\u5f0f\u8a9e\u8a00/JavaScript/basic-string"},next:{title:"Basic TypeScript",permalink:"/docs/\u7a0b\u5f0f\u8a9e\u8a00/TypeScript/basic-TS"}},t={},a=[{value:"Event Loop",id:"event-loop",level:2},{value:"\u524d\u8a00",id:"\u524d\u8a00",level:3},{value:"\u5be6\u969b\u4f8b\u5b50\u770b\u975e\u540c\u6b65",id:"\u5be6\u969b\u4f8b\u5b50\u770b\u975e\u540c\u6b65",level:3},{value:"\u90a3 <code>setTimeout(func, 0)</code> \u5462\uff1f",id:"\u90a3-settimeoutfunc-0-\u5462",level:3},{value:"Callback Function",id:"callback-function",level:2},{value:"Promise",id:"promise",level:2},{value:"async/await",id:"asyncawait",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function d(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,l.a)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.h2,{id:"event-loop",children:"Event Loop"}),"\n",(0,c.jsx)(e.h3,{id:"\u524d\u8a00",children:"\u524d\u8a00"}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u8b1b\u4ec0\u9ebc\u662f Event loop \u4e4b\u524d\u5fc5\u9808\u5148\u8a18\u5f97 JavaScript \u7684\u904b\u4f5c\u65b9\u5f0f\u662f",(0,c.jsx)(e.strong,{children:"\u55ae\u57f7\u884c\u7dd2 (single-threaded)"}),"\uff0c\u4e5f\u5c31\u662f\u5b83\u4e00\u6b21\u53ea\u80fd\u505a\u4e00\u4ef6\u4e8b\u60c5\uff0c\u6240\u6709\u7684\u51fd\u5f0f\u90fd\u5f97\u4e56\u4e56\u6392\u968a\u7b49\u8457\u88ab\u57f7\u884c\uff0c\u9019\u7a2e\u4e8b\u4ef6\u53c8\u53eb\u505a",(0,c.jsx)(e.strong,{children:"\u540c\u6b65 (synchronous)"}),"\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u540c\u6b65\u4e0b\uff0c\u7a0b\u5f0f\u78bc\u4e2d\u7684\u51fd\u5f0f\u4e00\u591a\uff0c\u6216\u8005\u8907\u96dc\u5ea6\u63d0\u9ad8\uff0c\u5c31\u589e\u52a0\u4e86\u6392\u968a\u7b49\u8457\u88ab\u57f7\u884c\u7684\u6642\u9593\uff0c\u5927\u6982\u5c31\u6709\u9ede\u50cf\u662f\u5927\u5bb6\u5728\u9ad8\u901f\u516c\u8def\u4e0a\u6392\u968a\u7b49\u8457\u4e0b\u4ea4\u6d41\u9053\uff0c\u7136\u5f8c\u5c31\u6703\u5f88\u9a5a\u559c\u5730\u767c\u73fe\uff1a\u54c7\u5594\uff0c\u7db2\u9801\u5361\u4f4f\u4e86\uff01\u9019\u7a2e\u585e\u4f4f\u7684\u73fe\u8c61\u88ab\u7a31\u4f5c",(0,c.jsx)(e.strong,{children:"\u963b\u585e (blocking)"}),"\u3002",(0,c.jsx)(e.br,{}),"\n","\u4f46\u662f\u5f88\u660e\u986f\uff0c\u505a\u70ba\u958b\u767c\u7db2\u9801\u7684\u7b2c\u4e00\u5927\u8a9e\u8a00\uff0cJavaScript \u4e00\u5b9a\u6703\u514b\u670d\u9019\u7a2e\u963b\u585e\u7684\u73fe\u8c61\u4f86\u9020\u5c31\u73fe\u5728\u5927\u5bb6\u4f7f\u7528\u7684\u9019\u9ebc\u9806\u66a2\u7684\u7db2\u9801 UI\uff0c\u65bc\u662f",(0,c.jsx)(e.strong,{children:"\u975e\u540c\u6b65 (asynchronous)"})," \u5c31\u96a8\u4e4b\u554f\u4e16\u3002",(0,c.jsx)(e.br,{}),"\n","\u975e\u540c\u6b65\u7684\u51fa\u73fe\u53ef\u4ee5\u8b93 JavaScript ",(0,c.jsx)(e.strong,{children:"\u4e26\u767c (concurrency)"})," \u904b\u4f5c\u7a0b\u5f0f\u78bc\u4e2d\u7684\u51fd\u5f0f\uff0c\u8b93\u55ae\u7dda\u7a0b\u7684\u57f7\u884c\u8b8a\u6210\u591a\u7dda\u7a0b\uff0c\u56e0\u6b64\u907f\u514d\u4e86\u963b\u585e\u7684\u767c\u751f\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u975e\u540c\u6b65\u7684\u6d41\u7a0b\u4e2d\uff0c\u6709\u4e09\u500b\u4e3b\u8981\u7684\u5340\u584a\uff1a ",(0,c.jsx)(e.strong,{children:"Call stack"}),"\u3001",(0,c.jsx)(e.strong,{children:"Web API"}),"\u3001",(0,c.jsx)(e.strong,{children:"Callback queue"}),"\u3002",(0,c.jsx)(e.br,{}),"\n",(0,c.jsx)(e.strong,{children:"Call stack"})," \u6703\u8ffd\u8e64\u6211\u5011\u547c\u53eb\u7684\u51fd\u5f0f\uff0c\u901a\u5e38\u4f86\u8aaa\uff0c\u5728\u540c\u6b65\u4e0b\u5c31\u53ea\u6703\u6709 Call stack \u7684\u5b58\u5728\uff0c\u6240\u4ee5\u963b\u585e\u5c31\u662f\u963b\u585e\u5728 Call stack \u9019\u88e1\uff0c\u53ef\u4ee5\u628a\u5b83\u60f3\u50cf\u6210\u9ad8\u901f\u516c\u8def\u7684\u4ea4\u6d41\u9053\uff0c\u4e00\u5806\u8eca\u5b50\u90fd\u64e0\u5728\u9019\u88e1\u7b49\u8457\u4e0b\u53bb\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u7576 JavaScript \u8981\u8655\u7406\u975e\u540c\u6b65\uff0c\u6bd4\u5982\u51fa\u73fe\u700f\u89bd\u5668\u8ca0\u8cac\u8655\u7406\u7684\u51fd\u5f0f (\u5982 ",(0,c.jsx)(e.code,{children:"setTimeout"}),") \u6642\uff0c\u6703\u5f9e ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u4e2d\u5c07\u8a72\u51fd\u5f0f\u53d6\u51fa\u4e1f\u5230 ",(0,c.jsx)(e.strong,{children:"Web API"})," \u7684\u53bb\u57f7\u884c\uff0c\u57f7\u884c\u5b8c\u7562\u518d\u4e1f\u5230 ",(0,c.jsx)(e.strong,{children:"Callback queue"})," \u53bb\uff0c\u7b49\u8457\u518d\u88ab\u585e\u56de ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u4e2d\u53bb\u8f38\u51fa\u7d50\u679c\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u800c ",(0,c.jsx)(e.strong,{children:"event loop"})," \u5c31\u50cf\u662f\u626e\u6f14\u4e00\u500b\u5b88\u885b\uff0c\u5b83\u4e0d\u65b7\u6aa2\u67e5 ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u662f\u5426\u70ba\u7a7a\u9592\uff0c\u82e5\u70ba\u7a7a\u9592\u5c31\u628a ",(0,c.jsx)(e.strong,{children:"Callback queue"})," \u4e2d\u7684",(0,c.jsx)(e.strong,{children:"\u56de\u8abf\u51fd\u5f0f (callback function)"})," \u4e1f\u56de ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u4e2d\u3002"]}),"\n",(0,c.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/8aGhZQkoFbQ?si=7V9jd4iQRVPrGkAt",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),"\n",(0,c.jsx)(e.h3,{id:"\u5be6\u969b\u4f8b\u5b50\u770b\u975e\u540c\u6b65",children:"\u5be6\u969b\u4f8b\u5b50\u770b\u975e\u540c\u6b65"}),"\n",(0,c.jsx)(e.p,{children:"Philip Roberts \u5728 JSConf EU \u4ecb\u7d39 event loop \u7684\u4f8b\u5b50\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"console.log(\u2018hi\u2019);\n\nsetTimeout(function cb(){\n\tconsole.log(\u2018there\u2019);\n}, 5000);\n\nconsole.log(\u2018JSConfEU\u2019)\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u9019\u6bb5 code \u7684\u7522\u51fa\u7d50\u679c\u9806\u5e8f\u5c07\u6703\u662f\uff1a"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.code,{children:"'hi'"})}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.code,{children:"'JSConfEU'"})}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.code,{children:"'there'"})}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u6309\u7167\u524d\u9762\u8b1b\u7684\u975e\u540c\u6b65\u4f86\u89e3\u91cb\u4e8b\u60c5\u662f\u600e\u9ebc\u767c\u751f\u7684\uff1a"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"console.log(\u2018hi\u2019)"})," \u585e\u5165 ",(0,c.jsx)(e.strong,{children:"Call stack"}),"\uff0c\u5f8c\u65b9\u7684\u7a0b\u5f0f\u78bc\u4e56\u4e56\u6392\u968a\u7b49\u5f85 ",(0,c.jsx)(e.code,{children:"console.log(\u2018hi\u2019)"})," \u57f7\u884c\u5b8c\u7562\u96e2\u958b ",(0,c.jsx)(e.strong,{children:"Call stack"}),"\u3002"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"setTimeout"})," \u585e\u5165 ",(0,c.jsx)(e.strong,{children:"Call stack"}),"\uff0c\u4f46\u56e0\u70ba\u5b83\u662f\u500b\u975e\u540c\u6b65\u8655\u7406\uff0c\u6240\u4ee5\u53c8\u79fb\u51fa  ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u8f49\u4ea4 ",(0,c.jsx)(e.strong,{children:"Web API"})," \u505a\u8655\u7406\u3002"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"console.log(\u2018JSConfEU\u2019)"})," \u585e\u5165 ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u57f7\u884c\u3002"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"setTimeout"})," \u5728 ",(0,c.jsx)(e.strong,{children:"Web API"})," \u57f7\u884c\u5b8c\u7562\uff0c\u5b83\u5167\u90e8\u7684\u56de\u8abf\u51fd\u5f0f (",(0,c.jsx)(e.code,{children:"console.log(\u2018there\u2019)"}),") \u585e\u5165 ",(0,c.jsx)(e.strong,{children:"Callback queue"}),"\u3002"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.strong,{children:"Call stack"})," \u6c92\u6709\u7a0b\u5f0f\u5728\u57f7\u884c\uff0c",(0,c.jsx)(e.code,{children:"console.log(\u2018there\u2019)"})," \u5f9e ",(0,c.jsx)(e.strong,{children:"Callback queue"})," \u585e\u5165 ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u57f7\u884c\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(e.admonition,{type:"info",children:[(0,c.jsxs)(e.h3,{id:"\u90a3-settimeoutfunc-0-\u5462",children:["\u90a3 ",(0,c.jsx)(e.code,{children:"setTimeout(func, 0)"})," \u5462\uff1f"]}),(0,c.jsxs)(e.p,{children:["\u8f38\u51fa\u7d50\u679c\u9806\u5e8f\u4f9d\u7136\u8ddf\u5012\u65785\u79d2\u4e00\u6a23\uff0c\u90a3\u662f\u56e0\u70ba ",(0,c.jsx)(e.code,{children:"setTimeout"})," \u9019\u500b",(0,c.jsx)(e.strong,{children:"\u975e\u540c\u6b65"}),"\u51fd\u5f0f\u5fc5\u7136\u662f\u8981\u9032\u5165 ",(0,c.jsx)(e.strong,{children:"Web API"}),"\u3001",(0,c.jsx)(e.strong,{children:"Callback queue"})," \u7136\u5f8c\u518d\u56de\u5230 ",(0,c.jsx)(e.strong,{children:"Call stack"})," \u8dd1\u4e0a\u9019\u9ebc\u4e00\u5708\u7684\u3002"]})]}),"\n",(0,c.jsx)(e.h2,{id:"callback-function",children:"Callback Function"}),"\n",(0,c.jsxs)(e.p,{children:["\u9700\u591a\u6587\u7ae0\u89e3\u91cb ",(0,c.jsx)(e.strong,{children:"callback"})," \u90fd\u6703\u9019\u6a23\u8aaa\uff1a"]}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\u628a\u4e00\u500b B \u51fd\u5f0f\u505a\u70ba\u53c3\u6578\u50b3\u9032\u53e6\u4e00\u500b A \u51fd\u5f0f\uff0c\u900f\u904e A \u51fd\u5f0f\u4f86\u547c\u53eb\u5b83\u3002"}),"\n"]}),"\n",(0,c.jsx)(e.p,{children:"\u9019\u6a23\u505a\u7684\u539f\u56e0\u6709\u5169\u500b\uff1a"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8b93 B \u51fd\u5f0f\u6eff\u8db3\u67d0\u500b\u689d\u4ef6\u624d",(0,c.jsx)(e.strong,{children:"\u88ab\u52d5\u5730"}),"\u53bb\u57f7\u884c\u3002"]}),"\n",(0,c.jsx)(e.li,{children:"\u8b93\u51fd\u5f0f\u4e4b\u9593\u6709\u57f7\u884c\u7684\u9806\u5e8f\u3002"}),"\n"]}),"\n",(0,c.jsxs)(e.p,{children:["\u767d\u8a71\u4e00\u9ede\u5c31\u662f\u6211\u8981\u505a\u5b8c A \u624d\u53bb\u57f7\u884c B\uff0c\u56de\u60f3\u4e00\u4e0b\u4e0a\u9762 ",(0,c.jsx)(e.code,{children:"setTimeout"})," \u7684\u4f8b\u5b50\uff0c\u5c31\u662f\u5f88\u5178\u578b\u7684 ",(0,c.jsx)(e.code,{children:"callback"})," \u61c9\u7528\uff0c\u5148\u57f7\u884c ",(0,c.jsx)(e.code,{children:"setTimeout"})," \u518d\u57f7\u884c ",(0,c.jsx)(e.code,{children:"console.log(\u2018there\u2019)"}),"\u3002",(0,c.jsx)(e.br,{}),"\n","\u518d\u8209\u4e00\u500b\u7b49\u4e00\u4e0b\u6703\u7528\u5230\u7684\u4f8b\u5b50\uff1a",(0,c.jsx)(e.strong,{children:"\u6578\u5b57\u76f8\u52a0\u7684\u7d50\u679c\u5982\u679c\u6709\u5927\u65bc 5 (A\u51fd\u5f0f) \u6642\uff0c\u53bb\u5c0d\u76f8\u52a0\u5f8c\u7684\u7d50\u679c\u4e58\u4ee5 10 (B\u51fd\u5f0f)"}),"\u3002"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"const addNum = (a, b, callback) =>{\n    const plusNum = a + b\n    if(plusNum > 5){\n        callback(plusNum)\n    }else{\n        console.log('the plusNum < 5')\n    }\n}\n\nconst multiNum = (num) => console.log(num * 10)\n\naddNum(6, 2, multiNum)\n"})}),"\n",(0,c.jsx)(e.h2,{id:"promise",children:"Promise"}),"\n",(0,c.jsxs)(e.p,{children:["\u8a66\u60f3\u4e00\u4e0b\uff0c\u525b\u525b\u7684\u4f8b\u5b50\u50c5\u662f A \u57f7\u884c\u5b8c\u53bb\u57f7\u884c B\uff0c\u4f46\u5982\u679c\u4eca\u5929 B \u57f7\u884c\u5b8c\u9084\u8981\u57f7\u884c C\u3001D\u3001E...\u5462\uff1f\u6050\u6015\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u8ff7\u5931\u5728\u832b\u832b\u7684 callback \u5927\u6d77\u4e2d\u4e86\u3002",(0,c.jsx)(e.br,{}),"\n","\u800c ",(0,c.jsx)(e.strong,{children:"promise"})," \u7684\u51fa\u73fe\u89e3\u6c7a ",(0,c.jsx)(e.strong,{children:"callback"})," \u4e00\u5c64\u5305\u4e00\u5c64\u7684\u554f\u984c\uff0c\u8b93\u51fd\u5f0f\u9593\u7684\u6b21\u5e8f\u66f4\u6e05\u695a\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.strong,{children:"promise"})," \u7684\u4f7f\u7528\u4e0a\u6703\u5148\u5efa\u7acb\u4e00\u500b ",(0,c.jsx)(e.strong,{children:"promise \u7269\u4ef6"}),"\uff0c\u800c promise \u901a\u5e38\u6703\u6709\u4e09\u7a2e\u72c0\u614b\uff1a"]}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsx)(e.li,{children:"Pending\uff1a\u8868\u793a\u6b63\u5728\u8655\u7406\u4e2d\u3002"}),"\n",(0,c.jsx)(e.li,{children:"Resolve\uff1a\u8868\u793a\u8655\u7406\u6210\u529f\u3002"}),"\n",(0,c.jsx)(e.li,{children:"Reject\uff1a\u8868\u793a\u8655\u7406\u5931\u6557\u3002"}),"\n"]}),"\n",(0,c.jsxs)(e.p,{children:["\u63a5\u8457\u901a\u5e38\u6703\u7528 ",(0,c.jsx)(e.code,{children:"then"})," \u4f86\u63a5\u6536\u6210\u679c\u7684\u7d50\u679c\u4e26\u7e7c\u7e8c\u8655\u7406\u4e0b\u4e00\u4ef6\u4e8b\uff0c\u7136\u5f8c\u7528 ",(0,c.jsx)(e.code,{children:"catch"})," \u4f86\u6355\u7372\u5931\u6557\u7684\u72c0\u6cc1\u3002",(0,c.jsx)(e.br,{}),"\n","\u6240\u4ee5 promise \u7684\u8a9e\u6cd5\u67b6\u69cb\u5927\u6982\u662f\u50cf\u9019\u6a23\uff1a",(0,c.jsx)(e.code,{children:"A().then(B()).catch(err)"}),"\u3002"]}),"\n",(0,c.jsx)(e.p,{children:"\u628a\u524d\u4e00\u6bb5\u7684\u7a0b\u5f0f\u78bc\u6539\u6210 promise \u6703\u50cf\u9019\u6a23\uff1a"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"const addNum = (a, b)=>{\n    return new Promise((resolve, reject)=>{\n        const plusNum = a + b\n        if(plusNum > 5){\n            resolve(plusNum)\n        }else{\n            reject('reject!')\n        }\n    })\n}\n\naddNum(6, 2)\n.then(num => multiNum(num))\n.catch(err => console.error(err))\n"})}),"\n",(0,c.jsx)(e.h2,{id:"asyncawait",children:"async/await"}),"\n",(0,c.jsxs)(e.p,{children:["\u9019\u662f\u57fa\u65bc ",(0,c.jsx)(e.strong,{children:"promise"})," \u7684\u8a9e\u6cd5\u7cd6\uff0c\u4ed6\u4e00\u5207\u7684\u904b\u4f5c\u539f\u7406\u90fd\u9084\u662f\u5efa\u7acb\u5728 ",(0,c.jsx)(e.strong,{children:"promise"})," \u4e0a\uff0c\u53ea\u662f ",(0,c.jsx)(e.strong,{children:"async/await"})," \u7684\u5beb\u6cd5\u8b93\u6211\u5011\u53ef\u4ee5\u7528\u770b\u4f3c\u540c\u6b65\u7684\u8a9e\u6cd5\u4f86\u64b0\u5beb\u975e\u540c\u6b65\u7684\u5167\u5bb9\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u51fd\u5f0f\u4e00\u958b\u59cb\u7528 ",(0,c.jsx)(e.strong,{children:"async"})," \u5b9a\u7fa9\u4e00\u500b\u975e\u540c\u6b65\u51fd\u5f0f\uff0c\u4e26\u5728\u5167\u90e8\u4f7f\u7528 ",(0,c.jsx)(e.strong,{children:"await"})," \u7b49\u5f85 promise \u57f7\u884c\u5b8c\u7562 (A\u51fd\u5f0f)\uff0c\u7136\u5f8c\u518d\u53bb\u57f7\u884c\u4e0b\u4e00\u500b\u52d5\u4f5c (B\u51fd\u5f0f)\u3002",(0,c.jsx)(e.br,{}),"\n","\u6c92\u932f\uff0c\u9084\u662f\u9700\u8981\u7528\u5230 ",(0,c.jsx)(e.strong,{children:"promise"}),"\uff0c\u5c31\u50cf\u4e00\u958b\u59cb\u8b1b\u7684\uff0c",(0,c.jsx)(e.strong,{children:"async/await"})," \u53ea\u662f ",(0,c.jsx)(e.strong,{children:"promise"})," \u7684\u8a9e\u6cd5\u7cd6\uff0c\u8b93\u6211\u5011\u4e0d\u7528 ",(0,c.jsx)(e.strong,{children:"then"})," \u4e0b\u53bb\u3002\u6240\u4ee5\u5982\u679c\u8981\u628a\u524d\u8ff0\u7684 ",(0,c.jsx)(e.strong,{children:"promise"})," \u5beb\u6cd5\u6539\u6210 ",(0,c.jsx)(e.strong,{children:"async/await"}),"\uff0c\u6211\u5011\u9084\u662f\u5f97\u4fdd\u7559 promise \u7684\u5efa\u7acb\u3002"]}),"\n",(0,c.jsxs)(e.p,{children:["\u800c\u5728 ",(0,c.jsx)(e.strong,{children:"async/await"})," \u4e2d\uff0c\u6211\u5011\u4f9d\u9760 ",(0,c.jsx)(e.strong,{children:"try"})," \u4f86\u8655\u7406 promise \u64cd\u4f5c\u6210\u529f\u7684\u60c5\u6cc1\uff0c\u7136\u5f8c\u9760 ",(0,c.jsx)(e.strong,{children:"catch"})," \u6355\u7372\u932f\u8aa4\u7d50\u679c\u3002"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-js",children:"const calculate = async(a, b) =>{\n    try{\n        const plusNum = await addNum(a, b)\n        multiNum(plusNum)\n    }\n    catch(err){\n        console.error(err)\n    }\n}\n\ncalculate(6, 2)\n"})}),"\n",(0,c.jsx)(e.admonition,{type:"warning",children:(0,c.jsxs)(e.p,{children:["\u6703\u6709\u4e00\u500b\u554f\u984c\uff0c\u5c31\u662f B \u51fd\u5f0f ",(0,c.jsx)(e.code,{children:"multiNum(plusNum)"})," \u6709\u6c92\u6709\u9700\u8981\u52a0\u4e0a ",(0,c.jsx)(e.code,{children:"await"}),"\uff1f\u7b54\u6848\u662f\u52a0\u4e86\u53ef\u4ee5\u52d5\uff0c\u4f46\u6c92\u5fc5\u8981\u52a0\u3002\n\u50cf\u524d\u8ff0\u8b1b\u7684\uff0c",(0,c.jsx)(e.code,{children:"await"})," \u5728\u7b49\u5f85\u7684\u662f\u4e00\u500b promise \u975e\u540c\u6b65\u51fd\u5f0f\u7684\u64cd\u4f5c\u5b8c\u6210\uff0c\u4f46\u6211\u5011\u7684 ",(0,c.jsx)(e.code,{children:"multiNum(plusNum)"})," \u5be6\u969b\u662f\u500b\u540c\u6b65\u51fd\u5f0f (\u4e0d\u662f\u57fa\u65bc ",(0,c.jsx)(e.strong,{children:"Promise"}),"\u3001\u4e0d\u4f7f\u7528 ",(0,c.jsx)(e.code,{children:"setTimeout"}),"\u3001\u4e0d\u9032\u884c\u7db2\u8def\u8acb\u6c42)\uff0c\u70ba\u4e86\u4e0d\u5fc5\u8981\u7684\u8aa4\u6703 (\u4e0d\u8ad6\u662f\u4eba\u7684\u8aa4\u6703\u9084\u662f\u7a0b\u5f0f\u78bc\u57f7\u884c\u7684\u8aa4\u6703)\uff0c\u76e1\u91cf\u4e0d\u8981\u5728\u540c\u6b65\u51fd\u5f0f\u524d\u6dfb\u52a0 ",(0,c.jsx)(e.code,{children:"await"}),"\u3002"]})}),"\n",(0,c.jsx)(e.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.a,{href:"https://yu-jack.github.io/2018/07/22/promise/",children:"callback, promise, async/await \u4f7f\u7528\u65b9\u5f0f\u6559\u5b78\u4ee5\u53ca\u4ecb\u7d39 Part I"})}),"\n",(0,c.jsx)(e.li,{children:(0,c.jsx)(e.a,{href:"https://noob.tw/js-async/",children:"\u6211\u8981\u5b78\u6703 JS(\u4e09)\uff1acallback\u3001Promise \u548c async/await \u90a3\u4e9b\u4e8b\u5152"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}},11151:(n,e,s)=>{s.d(e,{Z:()=>o,a:()=>i});var c=s(67294);const l={},r=c.createContext(l);function i(n){const e=c.useContext(r);return c.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),c.createElement(r.Provider,{value:e},n.children)}}}]);